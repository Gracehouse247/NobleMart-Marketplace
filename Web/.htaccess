RewriteEngine On

# 0. Subdomain Redirection (Seller Portal)
RewriteCond %{HTTP_HOST} ^seller\.noblemart\.com\.ng$ [NC]
RewriteCond %{REQUEST_URI} !^/seller/
RewriteRule ^(.*)$ /seller/$1 [L]

# 0.1 Subdomain Redirection (Properties Portal)
RewriteCond %{HTTP_HOST} ^properties\.noblemart\.com\.ng$ [NC]
RewriteCond %{REQUEST_URI} !^/properties/
RewriteRule ^(.*)$ /properties/$1 [L]

# 0.2 Subdomain Redirection (Blog Portal)
RewriteCond %{HTTP_HOST} ^blog\.noblemart\.com\.ng$ [NC]
RewriteCond %{REQUEST_URI} !^/blog/
RewriteRule ^(.*)$ /blog/$1 [L]

# 1. Enforce HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# 2. SEO Friendly Category URLs
RewriteRule ^shop/([^/]+)/?$ shop/category.html?slug=$1 [L,QSA]

# 3. SEO Friendly Product URLs
RewriteRule ^product/([^/]+)/?$ shop/product.html?slug=$1 [L,QSA]

# 4. SEO Friendly Blog URLs
RewriteRule ^blog/([^/]+)/?$ blog/post.html?slug=$1 [L,QSA]

# 5. Clean HTML extensions
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html [NC,L]

# 6. Performance: Browser Caching
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
    ExpiresByType text/html "access plus 1 day"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType image/x-icon "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
</IfModule>

# 7. Performance: GZIP Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>
